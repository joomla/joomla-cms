!function(e){function t(t){t.element.removeClass("cbScrollerWidth cbScrollerHeight");var l=t.element.children(".cbScrollerContent"),i=0,n=0,r=l.children();if(t.settings.elements&&(r=r.find(t.settings.elements)),t.settings.ignore&&(r=r.not(t.settings.ignore)),r.each(function(){i+=e(this).width(),n+=e(this).height()}),t.settings.width){var s=t.element.children(".cbScrollerLeft").addClass("hidden"),c=t.element.children(".cbScrollerRight").addClass("hidden");i>l.width()&&(t.element.addClass("cbScrollerWidth"),s.removeClass("hidden"),c.removeClass("hidden"))}if(t.settings.height){var o=t.element.children(".cbScrollerUp").addClass("hidden"),d=t.element.children(".cbScrollerDown").addClass("hidden");n>l.height()&&(t.element.addClass("cbScrollerHeight"),o.removeClass("hidden"),d.removeClass("hidden"))}}function l(t,l){if(("left"!=t&&"right"!=t||l.settings.width)&&("up"!=t&&"down"!=t||l.settings.height)){var i=l.element.children(".cbScrollerContent"),n=0,r=0,s=null,c=i.children();if(l.settings.elements&&(c=c.find(l.settings.elements)),l.settings.ignore&&(c=c.not(l.settings.ignore)),c.each(function(){n+=e(this).width(),r+=e(this).height()}),c.each(function(){switch(t){case"left":e(this).offset().left<i.offset().left&&(s=e(this));break;case"right":if(e(this).offset().left+e(this).width()>i.offset().left+i.width())return s=e(this),!1;break;case"up":e(this).offset().top<i.offset().top&&(s=e(this));break;case"down":if(e(this).offset().top+e(this).height()>i.offset().top+i.height())return s=e(this),!1}}),"left"==t||"right"==t)if(s)i.scrollTo(s,"fast",{axis:"x",easing:"linear"});else if(l.settings.loop){var o=n;"right"==t&&(o=0),i.scrollTo(o,0,{axis:"x",easing:"linear"})}else{var d=0;"right"==t&&(d=n),i.scrollTo(d,"fast",{axis:"x",easing:"linear"})}else if("up"==t||"down"==t)if(s)i.scrollTo(s,"fast",{axis:"y",easing:"linear"});else if(l.settings.loop){var a=r;"down"==t&&(a=0),i.scrollTo(a,0,{axis:"x",easing:"linear"})}else{var h=0;"down"==t&&(h=r),i.scrollTo(h,"fast",{axis:"y",easing:"linear"})}}}var i=[],n={init:function(n){return this.each(function(){var r=this,s=e(r).data("cbscroller");s||(s={},s.options="undefined"!=typeof n?n:{},s.defaults=e.fn.cbscroller.defaults,s.settings=e.extend(!0,{},s.defaults,s.options),s.element=e(r),s.settings.useData&&e.each(s.defaults,function(e){if("init"!=e&&"useData"!=e){var t=s.element.data("cbscroller"+e.charAt(0).toUpperCase()+e.slice(1));"undefined"!=typeof t?s.settings[e]=t:(t=s.element.data("cbscroller"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()),"undefined"!=typeof t&&(s.settings[e]=t))}}),s.element.triggerHandler("cbscroller.init.before",[s]),s.settings.init&&(s.resizeHandler=function(){t.call(r,s)},e(window).on("resize",s.resizeHandler),s.settings.width&&(s.leftHandler=function(e){e.preventDefault(),l.call(r,"left",s)},s.rightHandler=function(e){e.preventDefault(),l.call(r,"right",s)},s.element.children(".cbScrollerLeft").on("click",s.leftHandler),s.element.children(".cbScrollerRight").on("click",s.rightHandler)),s.settings.height&&(s.upHandler=function(e){e.preventDefault(),l.call(r,"up",s)},s.downHandler=function(e){e.preventDefault(),l.call(r,"down",s)},s.element.children(".cbScrollerUp").on("click",s.upHandler),s.element.children(".cbScrollerDown").on("click",s.downHandler)),t.call(r,s),s.element.on("rebind.cbscroller",function(){s.element.cbscroller("rebind")}),s.element.on("modified.cbscroller",function(e,t,l){t!=l&&s.element.cbscroller("rebind")}),s.element.on("cloned.cbscroller",function(){e(this).off("rebind.cbscroller"),e(this).off("modified.cbscroller"),e(this).off("cloned.cbscroller"),e(this).removeData("cbscroller"),s.settings.width&&(e(this).children(".cbScrollerLeft").off("click",s.leftHandler).addClass("hidden"),e(this).children(".cbScrollerRight").off("click",s.rightHandler).addClass("hidden")),s.settings.height&&(e(this).children(".cbScrollerUp").off("click",s.upHandler).addClass("hidden"),e(this).children(".cbScrollerDown").off("click",s.downHandler).addClass("hidden")),e(this).removeClass("cbScrollerWidth cbScrollerHeight"),e(this).cbscroller(s.options)}),s.element.triggerHandler("cbscroller.init.after",[s]),s.element.data("cbscroller",s),i.push(s)))})},update:function(){var l=e(this).data("cbscroller");return l?(t.call(this,l),this):this},left:function(){var t=e(this).data("cbscroller");return t&&t.settings.width?(l.call(this,"left",t),this):this},right:function(){var t=e(this).data("cbscroller");return t&&t.settings.width?(l.call(this,"right",t),this):this},up:function(){var t=e(this).data("cbscroller");return t&&t.settings.height?(l.call(this,"up",t),this):this},down:function(){var t=e(this).data("cbscroller");return t&&t.settings.height?(l.call(this,"down",t),this):this},rebind:function(){var t=e(this).data("cbscroller");return t?(t.element.cbscroller("destroy"),t.element.cbscroller(t.options),this):this},destroy:function(){var t=e(this).data("cbscroller");return t?(t.element.off("rebind.cbscroller"),t.element.off("modified.cbscroller"),t.element.off("cloned.cbscroller"),e(window).off("resize",t.resizeHandler),t.settings.width&&(t.element.children(".cbScrollerLeft").off("click",t.leftHandler).addClass("hidden"),t.element.children(".cbScrollerRight").off("click",t.rightHandler).addClass("hidden")),t.settings.height&&(t.element.children(".cbScrollerUp").off("click",t.upHandler).addClass("hidden"),t.element.children(".cbScrollerDown").off("click",t.downHandler).addClass("hidden")),t.element.removeClass("cbScrollerWidth cbScrollerHeight"),t.element.removeData("cbscroller"),t.element.triggerHandler("cbscroller.destroyed",[t]),this):this},instances:function(){return i}};e.fn.cbscroller=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:n.init.apply(this,arguments)},e.fn.cbscroller.defaults={init:!0,useData:!0,elements:null,ignore:null,width:!0,height:!0,loop:!1}}(jQuery);