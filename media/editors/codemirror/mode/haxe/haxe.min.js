!(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})((function(a){"use strict";a.defineMode("haxe",(function(a,b){function c(a){return{type:a,style:"keyword"}}function d(a,b,c){return b.tokenize=c,c(a,b)}function e(a,b){for(var c,d=!1;null!=(c=a.next());){if(c==b&&!d)return!0;d=!d&&"\\"==c}}function f(a,b,c){return U=a,V=c,b}function g(a,b){var c=a.next();if('"'==c||"'"==c)return d(a,b,h(c));if(/[\[\]{}\(\),;\:\.]/.test(c))return f(c);if("0"==c&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),f("number","number");if(/\d/.test(c)||"-"==c&&a.eat(/\d/))return a.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),f("number","number");if(b.reAllowed&&"~"==c&&a.eat(/\//))return e(a,"/"),a.eatWhile(/[gimsu]/),f("regexp","string-2");if("/"==c)return a.eat("*")?d(a,b,i):a.eat("/")?(a.skipToEnd(),f("comment","comment")):(a.eatWhile(ca),f("operator",null,a.current()));if("#"==c)return a.skipToEnd(),f("conditional","meta");if("@"==c)return a.eat(/:/),a.eatWhile(/[\w_]/),f("metadata","meta");if(ca.test(c))return a.eatWhile(ca),f("operator",null,a.current());var g;if(/[A-Z]/.test(c))return a.eatWhile(/[\w_<>]/),g=a.current(),f("type","variable-3",g);a.eatWhile(/[\w_]/);var g=a.current(),j=ba.propertyIsEnumerable(g)&&ba[g];return j&&b.kwAllowed?f(j.type,j.style,g):f("variable","variable",g)}function h(a){return function(b,c){return e(b,a)&&(c.tokenize=g),f("string","string")}}function i(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=g;break}d="*"==c}return f("comment","comment")}function j(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,null!=d&&(this.align=d)}function k(a,b){for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0}function l(a,b,c,d,e){var f=a.cc;for(ea.state=a,ea.stream=e,ea.marked=null,ea.cc=f,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;){var g=f.length?f.pop():x;if(g(c,d)){for(;f.length&&f[f.length-1].lex;)f.pop()();return ea.marked?ea.marked:"variable"==c&&k(a,d)?"variable-2":"variable"==c&&m(a,d)?"variable-3":b}}}function m(a,b){if(/[a-z]/.test(b.charAt(0)))return!1;for(var c=a.importedtypes.length,d=0;d<c;d++)if(a.importedtypes[d]==b)return!0}function n(a){for(var b=ea.state,c=b.importedtypes;c;c=c.next)if(c.name==a)return;b.importedtypes={name:a,next:b.importedtypes}}function o(){for(var a=arguments.length-1;a>=0;a--)ea.cc.push(arguments[a])}function p(){return o.apply(null,arguments),!0}function q(a,b){for(var c=b;c;c=c.next)if(c.name==a)return!0;return!1}function r(a){var b=ea.state;if(b.context){if(ea.marked="def",q(a,b.localVars))return;b.localVars={name:a,next:b.localVars}}else if(b.globalVars){if(q(a,b.globalVars))return;b.globalVars={name:a,next:b.globalVars}}}function s(){ea.state.context||(ea.state.localVars=fa),ea.state.context={prev:ea.state.context,vars:ea.state.localVars}}function t(){ea.state.localVars=ea.state.context.vars,ea.state.context=ea.state.context.prev}function u(a,b){var c=function(){var c=ea.state;c.lexical=new j(c.indented,ea.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function v(){var a=ea.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function w(a){function b(c){return c==a?p():";"==a?o():p(b)}return b}function x(a){return"@"==a?p(C):"var"==a?p(u("vardef"),L,w(";"),v):"keyword a"==a?p(u("form"),y,x,v):"keyword b"==a?p(u("form"),x,v):"{"==a?p(u("}"),s,K,v,t):";"==a?p():"attribute"==a?p(B):"function"==a?p(P):"for"==a?p(u("form"),w("("),u(")"),N,w(")"),v,x,v):"variable"==a?p(u("stat"),G):"switch"==a?p(u("form"),y,u("}","switch"),w("{"),K,v,v):"case"==a?p(y,w(":")):"default"==a?p(w(":")):"catch"==a?p(u("form"),s,w("("),T,w(")"),x,v,t):"import"==a?p(E,w(";")):"typedef"==a?p(F):o(u("stat"),y,w(";"),v)}function y(a){return da.hasOwnProperty(a)?p(A):"type"==a?p(A):"function"==a?p(P):"keyword c"==a?p(z):"("==a?p(u(")"),z,w(")"),v,A):"operator"==a?p(y):"["==a?p(u("]"),J(z,"]"),v,A):"{"==a?p(u("}"),J(I,"}"),v,A):p()}function z(a){return a.match(/[;\}\)\],]/)?o():o(y)}function A(a,b){if("operator"==a&&/\+\+|--/.test(b))return p(A);if("operator"==a||":"==a)return p(y);if(";"!=a)return"("==a?p(u(")"),J(y,")"),v,A):"."==a?p(H,A):"["==a?p(u("]"),y,w("]"),v,A):void 0}function B(a){return"attribute"==a?p(B):"function"==a?p(P):"var"==a?p(L):void 0}function C(a){return":"==a?p(C):"variable"==a?p(C):"("==a?p(u(")"),J(D,")"),v,x):void 0}function D(a){if("variable"==a)return p()}function E(a,b){return"variable"==a&&/[A-Z]/.test(b.charAt(0))?(n(b),p()):"variable"==a||"property"==a||"."==a||"*"==b?p(E):void 0}function F(a,b){return"variable"==a&&/[A-Z]/.test(b.charAt(0))?(n(b),p()):"type"==a&&/[A-Z]/.test(b.charAt(0))?p():void 0}function G(a){return":"==a?p(v,x):o(A,w(";"),v)}function H(a){if("variable"==a)return ea.marked="property",p()}function I(a){if("variable"==a&&(ea.marked="property"),da.hasOwnProperty(a))return p(w(":"),y)}function J(a,b){function c(d){return","==d?p(a,c):d==b?p():p(w(b))}return function(d){return d==b?p():o(a,c)}}function K(a){return"}"==a?p():o(x,K)}function L(a,b){return"variable"==a?(r(b),p(Q,M)):p()}function M(a,b){return"="==b?p(y,M):","==a?p(L):void 0}function N(a,b){return"variable"==a?(r(b),p(O,y)):o()}function O(a,b){if("in"==b)return p()}function P(a,b){return"variable"==a||"type"==a?(r(b),p(P)):"new"==b?p(P):"("==a?p(u(")"),s,J(T,")"),v,Q,x,t):void 0}function Q(a){if(":"==a)return p(R)}function R(a){return"type"==a?p():"variable"==a?p():"{"==a?p(u("}"),J(S,"}"),v):void 0}function S(a){if("variable"==a)return p(Q)}function T(a,b){if("variable"==a)return r(b),p(Q)}var U,V,W=a.indentUnit,X=c("keyword a"),Y=c("keyword b"),Z=c("keyword c"),$=c("operator"),_={type:"atom",style:"atom"},aa={type:"attribute",style:"attribute"},U=c("typedef"),ba={if:X,while:X,else:Y,do:Y,try:Y,return:Z,break:Z,continue:Z,new:Z,throw:Z,var:c("var"),inline:aa,static:aa,using:c("import"),public:aa,private:aa,cast:c("cast"),import:c("import"),macro:c("macro"),function:c("function"),catch:c("catch"),untyped:c("untyped"),callback:c("cb"),for:c("for"),switch:c("switch"),case:c("case"),default:c("default"),in:$,never:c("property_access"),trace:c("trace"),class:U,abstract:U,enum:U,interface:U,typedef:U,extends:U,implements:U,dynamic:U,true:_,false:_,null:_},ca=/[+\-*&%=<>!?|]/,da={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},ea={state:null,column:null,marked:null,cc:null},fa={name:"this",next:null};return t.lex=!0,v.lex=!0,{startState:function(a){var c=["Int","Float","String","Void","Std","Bool","Dynamic","Array"],d={tokenize:g,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new j((a||0)-W,0,"block",!1),localVars:b.localVars,importedtypes:c,context:b.localVars&&{vars:b.localVars},indented:0};return b.globalVars&&"object"==typeof b.globalVars&&(d.globalVars=b.globalVars),d},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation()),a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"==U?c:(b.reAllowed=!("operator"!=U&&"keyword c"!=U&&!U.match(/^[\[{}\(,;:]$/)),b.kwAllowed="."!=U,l(b,c,U,V,a))},indent:function(a,b){if(a.tokenize!=g)return 0;var c=b&&b.charAt(0),d=a.lexical;"stat"==d.type&&"}"==c&&(d=d.prev);var e=d.type,f=c==e;return"vardef"==e?d.indented+4:"form"==e&&"{"==c?d.indented:"stat"==e||"form"==e?d.indented+W:"switch"!=d.info||f?d.align?d.column+(f?0:1):d.indented+(f?0:W):d.indented+(/^(?:case|default)\b/.test(b)?W:2*W)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}})),a.defineMIME("text/x-haxe","haxe"),a.defineMode("hxml",(function(){return{startState:function(){return{define:!1,inString:!1}},token:function(a,b){var c=a.peek(),d=a.sol();if("#"==c)return a.skipToEnd(),"comment";if(d&&"-"==c){var e="variable-2";return a.eat(/-/),"-"==a.peek()&&(a.eat(/-/),e="keyword a"),"D"==a.peek()&&(a.eat(/[D]/),e="keyword c",b.define=!0),a.eatWhile(/[A-Z]/i),e}var c=a.peek();return 0==b.inString&&"'"==c&&(b.inString=!0,a.next()),1==b.inString?(a.skipTo("'")||a.skipToEnd(),"'"==a.peek()&&(a.next(),b.inString=!1),"string"):(a.next(),null)},lineComment:"#"}})),a.defineMIME("text/x-hxml","hxml")}));