!(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../javascript/javascript")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../javascript/javascript"],a):a(CodeMirror)})((function(a){"use strict";a.defineMode("pegjs",(function(b){function c(a){return a.match(/^[a-zA-Z_][a-zA-Z0-9_]*/)}var d=a.getMode(b,"javascript");return{startState:function(){return{inString:!1,stringType:null,inComment:!1,inCharacterClass:!1,braced:0,lhs:!0,localState:null}},token:function(b,e){if(b&&(e.inString||e.inComment||'"'!=b.peek()&&"'"!=b.peek()||(e.stringType=b.peek(),b.next(),e.inString=!0)),e.inString||e.inComment||!b.match("/*")||(e.inComment=!0),e.inString){for(;e.inString&&!b.eol();)b.peek()===e.stringType?(b.next(),e.inString=!1):"\\"===b.peek()?(b.next(),b.next()):b.match(/^.[^\\\"\']*/);return e.lhs?"property string":"string"}if(e.inComment){for(;e.inComment&&!b.eol();)b.match("*/")?e.inComment=!1:b.match(/^.[^\*]*/);return"comment"}if(e.inCharacterClass)for(;e.inCharacterClass&&!b.eol();)b.match(/^[^\]\\]+/)||b.match(/^\\./)||(e.inCharacterClass=!1);else{if("["===b.peek())return b.next(),e.inCharacterClass=!0,"bracket";if(b.match("//"))return b.skipToEnd(),"comment";if(e.braced||"{"===b.peek()){null===e.localState&&(e.localState=a.startState(d));var f=d.token(b,e.localState),g=b.current();if(!f)for(var h=0;h<g.length;h++)"{"===g[h]?e.braced++:"}"===g[h]&&e.braced--;return f}if(c(b))return":"===b.peek()?"variable":"variable-2";if(-1!=["[","]","(",")"].indexOf(b.peek()))return b.next(),"bracket";b.eatSpace()||b.next()}return null}}}),"javascript")}));