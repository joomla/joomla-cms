!function(t,e,n,i){"use strict";n.getSize=n.getSize||function(){return{x:n.innerWidth,y:n.innerHeight}};var o={setupEditors:function(t){t=t||i;for(var n=e.getOptions?e.getOptions("plg_editor_tinymce",{}):e.optionsStorage.plg_editor_tinymce||{},o=t.querySelectorAll(".js-editor-tinymce"),a=0,r=o.length;a<r;a++){var s=o[a].querySelector("textarea");this.setupEditor(s,n)}},setupEditor:function(n,o){if(!e.editors.instances[n.id]){var a=n?n.getAttribute("name").replace(/\[\]|\]/g,"").split("[").pop():"default",r=o&&o.tinyMCE||{},s=r.default||{},u=r[a]?r[a]:s;if(u=u.joomlaMergeDefaults?e.extend(e.extend({},s),u):e.extend({},u),n&&(u.selector=null,u.target=n),u.joomlaExtButtons&&u.joomlaExtButtons.names&&u.joomlaExtButtons.names.length){u.toolbar1+=" | "+u.joomlaExtButtons.names.join(" ");var l=u.joomlaExtButtons.script.join(";");u.setupCallbackString=u.setupCallbackString||"",u.setupCallbackString=u.setupCallbackString+";"+l,u.joomlaExtButtons=null}u.setupCallbackString&&!u.setup&&(u.setup=new Function("editor",u.setupCallbackString));var d=new t.Editor(n.id,u,tinymce.EditorManager);d.render(),e.editors.instances[n.id]={getValue:function(){return this.instance.getContent()},setValue:function(t){return this.instance.setContent(t)},replaceSelection:function(t){return this.instance.execCommand("mceInsertContent",!1,t)},id:n.id,instance:d,onSave:function(){return this.instance.isHidden()&&this.instance.show(),""}},i.getElementById(d.id).form.addEventListener("submit",function(){return e.editors.instances[d.targetElm.id].onSave()})}}};e.JoomlaTinyMCE=o,i.addEventListener("DOMContentLoaded",function(){e.JoomlaTinyMCE.setupEditors(i)}),i.addEventListener("joomla:updated",function(t){e.JoomlaTinyMCE.setupEditors(t.target)})}(tinyMCE,Joomla,window,document);