var JFormValidator=function(){"use strict";var t,e,a,r=function(e,a,r){r=""===r?!0:r,t[e]={enabled:r,exec:a}},i=function(t,e){var a,r=jQuery(e);return t?(a=r.find("#"+t+"-lbl"),a.length?a:(a=r.find('label[for="'+t+'"]'),a.length?a:!1)):!1},n=function(t,e){var a=e.data("label");void 0===a&&(a=i(e.attr("id"),e.get(0).form),e.data("label",a)),t===!1?(e.addClass("invalid").attr("aria-invalid","true"),a&&a.addClass("invalid").attr("aria-invalid","true")):(e.removeClass("invalid").attr("aria-invalid","false"),a&&a.removeClass("invalid").attr("aria-invalid","false"))},l=function(e){var a,r,i=jQuery(e);if(i.attr("disabled"))return n(!0,i),!0;if(i.attr("required")||i.hasClass("required"))if(a=i.prop("tagName").toLowerCase(),"fieldset"===a&&(i.hasClass("radio")||i.hasClass("checkboxes"))){if(!i.find("input:checked").length)return n(!1,i),!1}else if(!i.val()||i.hasClass("placeholder")||"checkbox"===i.attr("type")&&!i.is(":checked"))return n(!1,i),!1;return r=i.attr("class")&&i.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?i.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"",""===r?(n(!0,i),!0):r&&"none"!==r&&t[r]&&i.val()&&t[r].exec(i.val(),i)!==!0?(n(!1,i),!1):(n(!0,i),!0)},u=function(t){var e,r,i,n,u,s,o=!0,d=[];for(e=jQuery(t).find("input, textarea, select, fieldset"),u=0,s=e.length;s>u;u++)l(e[u])===!1&&(o=!1,d.push(e[u]));if(jQuery.each(a,function(t,e){e.exec()!==!0&&(o=!1)}),!o&&d.length>0){for(r=Joomla.JText._("JLIB_FORM_FIELD_INVALID"),i={error:[]},u=d.length-1;u>=0;u--)n=jQuery(d[u]).data("label"),n&&i.error.push(r+n.text().replace("*",""));Joomla.renderMessages(i)}return o},s=function(t){var a,r=[],i=jQuery(t);a=i.find("input, textarea, select, fieldset, button");for(var n=0,s=a.length;s>n;n++){var o=jQuery(a[n]),d=o.prop("tagName").toLowerCase();"input"!==d&&"button"!==d||"submit"!==o.attr("type")&&"image"!==o.attr("type")?"button"===d||"input"===d&&"button"===o.attr("type")||(o.hasClass("required")&&o.attr("aria-required","true").attr("required","required"),"fieldset"!==d&&(o.on("blur",function(){return l(this)}),o.hasClass("validate-email")&&e&&(o.get(0).type="email")),r.push(o)):o.hasClass("validate")&&o.on("click",function(){return u(t)})}i.data("inputfields",r)},o=function(){t={},a=a||{},e=function(){var t=document.createElement("input");return t.setAttribute("type","email"),"text"!==t.type}(),r("username",function(t){var e=new RegExp("[<|>|\"|'|%|;|(|)|&]","i");return!e.test(t)}),r("password",function(t){var e=/^\S[\S ]{2,98}\S$/;return e.test(t)}),r("numeric",function(t){var e=/^(\d|-)?(\d|,)*\.?\d*$/;return e.test(t)}),r("email",function(t){var e=/^[a-zA-Z0-9.!#%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*/,a=t.split("@");if(t=a[0],a.length>1){for(var r=a[1].split("."),i=0;i<r.length;i++)r[i]=punycode.toASCII(r[i]);t=t+"@"+r.join(".")}return e.test(t)});for(var i=jQuery("form.form-validate"),n=0,l=i.length;l>n;n++)s(i[n])};return o(),{isValid:u,validate:l,setHandler:r,attachToForm:s,custom:a}};document.formvalidator=null,jQuery(function(){document.formvalidator=new JFormValidator});