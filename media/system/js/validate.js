var JFormValidator=function(){var e,t,n,r,i=function(e,n,r){r=r===""?true:r;t[e]={enabled:r,exec:n}},s=function(e,t){var n,r=jQuery(t);if(!e){return false}n=r.find("#"+e+"-lbl");if(n.length){return n}n=r.find('label[for="'+e+'"]');if(n.length){return n}return false},o=function(e,t){var n=t.data("label");if(e===false){t.addClass("invalid").attr("aria-invalid","true");if(n){n.addClass("invalid").attr("aria-invalid","true")}}else{t.removeClass("invalid").attr("aria-invalid","false");if(n){n.removeClass("invalid").attr("aria-invalid","false")}}},u=function(e){var n=jQuery(e),r,i;if(n.attr("disabled")){o(true,n);return true}if(n.attr("required")||n.hasClass("required")){r=n.prop("tagName").toLowerCase();if(r==="fieldset"&&(n.hasClass("radio")||n.hasClass("checkboxes"))){if(!n.find("input:checked").length){o(false,n);return false}}else if(!n.val()||n.hasClass("placeholder")||n.attr("type")==="checkbox"&&!n.is(":checked")){o(false,n);return false}}i=n.attr("class")&&n.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?n.attr("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"";if(i===""){o(true,n);return true}if(i&&i!=="none"&&t[i]&&n.val()){if(t[i].exec(n.val(),n)!==true){o(false,n);return false}}o(true,n);return true},a=function(e){var t=true,n,i,s,o,a;jQuery.each(jQuery(e).find("input, textarea, select, fieldset, button"),function(e,n){if(u(n)===false){t=false}});jQuery.each(r,function(e,n){if(n.exec()!==true){t=false}});if(!t){i=Joomla.JText._("JLIB_FORM_FIELD_INVALID");s=jQuery("input.invalid, textarea.invalid, select.invalid, fieldset.invalid, button.invalid");o={};o.error=[];for(n=0;n<s.length;n++){a=jQuery("label[for="+s[n].id+"]").text();if(a!=="undefined"){o.error[n]=i+a.replace("*","")}}Joomla.renderMessages(o)}return t},f=function(t){var r=[];jQuery(t).find("input, textarea, select, fieldset, button").each(function(){var i=e(this),o=i.attr("id"),f=i.prop("tagName").toLowerCase();if(i.hasClass("required")){i.attr("aria-required","true").attr("required","required")}if((f==="input"||f==="button")&&i.attr("type")==="submit"){if(i.hasClass("validate")){i.on("click",function(){return a(t)})}}else{if(f!=="fieldset"){i.on("blur",function(){return u(this)});if(i.hasClass("validate-email")&&n){i.get(0).type="email"}}i.data("label",s(o,t));r.push(i)}});e(t).data("inputfields",r)},l=function(){e=jQuery.noConflict();t={};r=r||{};n=function(){var e=document.createElement("input");e.setAttribute("type","email");return e.type!=="text"}();i("username",function(e,t){regex=new RegExp("[<|>|\"|'|%|;|(|)|&]","i");return!regex.test(e)});i("password",function(e,t){regex=/^\S[\S ]{2,98}\S$/;return regex.test(e)});i("numeric",function(e,t){regex=/^(\d|-)?(\d|,)*\.?\d*$/;return regex.test(e)});i("email",function(e,t){e=punycode.toASCII(e);regex=/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return regex.test(e)});jQuery("form.form-validate").each(function(){f(this)})};l();return{isValid:a,validate:u,setHandler:i,attachToForm:f,custom:r}};document.formvalidator=null;jQuery(function(){document.formvalidator=new JFormValidator})
