function jSelectUser(a){var b=jQuery(a),c=b.data("user-value"),d=b.data("user-name"),e=b.data("user-field"),f=jQuery("#"+e+"_id"),g=jQuery("#"+e);if(f.length){f.val(c).trigger("change"),g.val(d||c).trigger("change");var h,i=f.attr("data-onchange");i&&(h=new Function(i),h.call(f[0])),jModalClose()}}!function(a){"use strict";a.fieldUser=function(b,c){this.options=a.extend({},a.fieldUser.defaults,c),this.$container=a(b),this.$modal=this.$container.find(this.options.modal),this.$modalBody=this.$modal.children(".modal-body"),this.$input=this.$container.find(this.options.input),this.$inputName=this.$container.find(this.options.inputName),this.$buttonSelect=this.$container.find(this.options.buttonSelect),this.$buttonSelect.on("click",this.modalOpen.bind(this)),this.$modal.on("hide",this.removeIframe.bind(this));var d,e=this.$input.attr("data-onchange");e&&(d=new Function(e),this.$input.on("change",d.bind(this.$input)))},a.fieldUser.prototype.modalOpen=function(){var b=a("<iframe>",{name:"field-user-modal",src:this.options.url.replace("{field-user-id}",this.$input.attr("id")),width:this.options.modalWidth,height:this.options.modalHeight});this.$modalBody.append(b),this.$modal.modal("show"),a("body").addClass("modal-open");var c=this;b.load(function(){var b=a(this).contents();b.on("click",".button-select",function(){c.setValue(a(this).data("user-value"),a(this).data("user-name")),c.modalClose(),a("body").removeClass("modal-open")})})},a.fieldUser.prototype.modalClose=function(){this.$modal.modal("hide"),this.$modalBody.empty(),a("body").removeClass("modal-open")},a.fieldUser.prototype.removeIframe=function(){this.$modalBody.empty(),a("body").removeClass("modal-open")},a.fieldUser.prototype.setValue=function(a,b){this.$input.val(a).trigger("change"),this.$inputName.val(b||a).trigger("change")},a.fieldUser.defaults={buttonSelect:".button-select",input:".field-user-input",inputName:".field-user-input-name",modal:".modal",url:"index.php?option=com_users&view=users&layout=modal&tmpl=component",modalWidth:"100%",modalHeight:"300px"},a.fn.fieldUser=function(b){return this.each(function(){var b=a(this),c=b.data("fieldUser");if(!c){var d=d||{},e=b.data();for(var f in e)e.hasOwnProperty(f)&&(d[f]=e[f]);c=new a.fieldUser(this,d),b.data("fieldUser",c)}})},a(document).ready(function(){a(".field-user-wrapper").fieldUser()})}(jQuery);