!function(){var e={},t=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},n=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&function(t){for(var r=e[t],i=r.deps,o=r.defn,a=i.length,s=new Array(a),l=0;l<a;++l)s[l]=n(i[l]);var c=o.apply(null,s);if(void 0===c)throw"module ["+t+"] returned undefined";r.instance=c}(t),r.instance},r=t,i=function(e,t){r(e,[],function(){return t})};r("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),i("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),r("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("global!window",window),r("tinymce.plugins.paste.alien.DetectProPlugin",["global!window","tinymce.core.PluginManager"],function(e,t){return{hasProPlugin:function(n){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(n.settings.plugins)||!t.get("powerpaste")||(void 0!==e.console&&e.console.log&&e.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))}}}),r("tinymce.plugins.paste.api.Api",[],function(e){return{get:function(e,t){return{clipboard:e,quirks:t}}}}),r("tinymce.plugins.paste.api.Events",[],function(){return{firePastePreProcess:function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},firePastePostProcess:function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},firePastePlainTextToggle:function(e,t){return e.fire("PastePlainTextToggle",{state:t})},firePaste:function(e,t){return e.fire("paste",{ieFake:t})}}}),r("tinymce.plugins.paste.api.Settings",[],function(){return{shouldPlainTextInform:function(e){return e.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(e){return e.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(e){return e.getParam("paste_data_images",!1)},shouldFilterDrop:function(e){return e.getParam("paste_filter_drop",!0)},getPreProcess:function(e){return e.getParam("paste_preprocess")},getPostProcess:function(e){return e.getParam("paste_postprocess")},getWebkitStyles:function(e){return e.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(e){return e.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(e){return e.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(e){return e.getParam("paste_as_text",!1)},getRetainStyleProps:function(e){return e.getParam("paste_retain_style_properties")},getWordValidElements:function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(e){return e.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(e){return e.getParam("paste_enable_default_filters",!0)}}}),r("tinymce.plugins.paste.core.Actions",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.api.Settings"],function(e,t){return{togglePlainTextPaste:function(n,r,i){"text"===r.pasteFormat?(r.pasteFormat="html",e.firePastePlainTextToggle(n,!1)):(r.pasteFormat="text",e.firePastePlainTextToggle(n,!0),s=n,!1===i.get()&&t.shouldPlainTextInform(s)&&(a="Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.",(o=n).notificationManager.open({text:o.translate(a),type:"info"}),i.set(!0)));var o,a,s;n.focus()}}}),r("tinymce.plugins.paste.api.Commands",["tinymce.plugins.paste.core.Actions"],function(e){return{register:function(t,n,r){t.addCommand("mceTogglePlainTextPaste",function(){e.togglePlainTextPaste(t,n,r)}),t.addCommand("mceInsertClipboardContent",function(e,t){t.content&&n.pasteHtml(t.content,t.internal),t.text&&n.pasteText(t.text)})}}}),i("global!Image",Image),i("global!navigator",navigator),r("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),r("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),r("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),r("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),r("tinymce.plugins.paste.core.InternalHtml",[],function(){var e="\x3c!-- x-tinymce/html --\x3e";return{mark:function(t){return e+t},unmark:function(t){return t.replace(e,"")},isMarked:function(t){return-1!==t.indexOf(e)},internalHtmlMime:function(){return"x-tinymce/html"}}}),r("tinymce.core.html.Entities",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Entities")}),r("tinymce.plugins.paste.core.Newlines",["tinymce.core.util.Tools","tinymce.core.html.Entities"],function(e,t){var n=function(e){return e.replace(/\r?\n/g,"<br>")},r=function(n,r,i){var o=n.split(/\n\n/),a=function(e,n){var r,i=[],o="<"+e;if("object"==typeof n){for(r in n)n.hasOwnProperty(r)&&i.push(r+'="'+t.encodeAllRaw(n[r])+'"');i.length&&(o+=" "+i.join(" "))}return o+">"}(r,i),s="</"+r+">",l=e.map(o,function(e){return e.split(/\n/).join("<br />")});return 1===l.length?l[0]:e.map(l,function(e){return a+e+s}).join("")};return{isPlainText:function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},convert:function(e,t,i){return t?r(e,t,i):n(e)},toBRs:n,toBlockElements:r}}),r("tinymce.plugins.paste.core.PasteBin",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){return function(n){var r,i=function(){return n.dom.get("mcepastebin")},o=function(e){return"%MCEPASTEBIN%"===e};return{create:function(){var e,i,o=n.dom,a=n.getBody(),s=n.dom.getViewPort(n.getWin()).y,l=20;r=n.selection.getRng(),n.inline&&(i=n.selection.getScrollContainer())&&i.scrollTop>0&&(s=i.scrollTop);if(r.getClientRects){var c=function(e){var t,n,i,a=e.startContainer;if((t=e.getClientRects()).length)return t[0];if(e.collapsed&&1===a.nodeType){for(i=a.childNodes[r.startOffset];i&&3===i.nodeType&&!i.data.length;)i=i.nextSibling;if(i)return"BR"===i.tagName&&(n=o.doc.createTextNode("\ufeff"),i.parentNode.insertBefore(n,i),(e=o.createRng()).setStartBefore(n),e.setEndAfter(n),t=e.getClientRects(),o.remove(n)),t.length?t[0]:void 0}}(r);if(c)l=s+(c.top-o.getPos(a).y);else{l=s;var u=r.startContainer;u&&(3===u.nodeType&&u.parentNode!==a&&(u=u.parentNode),1===u.nodeType&&(l=o.getPos(u,i||a).y))}}e=n.dom.add(n.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+l+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"},"%MCEPASTEBIN%"),(t.ie||t.gecko)&&o.setStyle(e,"left","rtl"===o.getStyle(a,"direction",!0)?65535:-65535),o.bind(e,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),e.focus(),n.selection.select(e,!0)},remove:function(){if(i()){for(var e;e=n.dom.get("mcepastebin");)n.dom.remove(e),n.dom.unbind(e);r&&n.selection.setRng(r)}r=null},getEl:i,getHtml:function(){var t,r,i,o,a,s=function(e,t){e.appendChild(t),n.dom.remove(t,!0)};for(r=e.grep(n.getBody().childNodes,function(e){return"mcepastebin"===e.id}),t=r.shift(),e.each(r,function(e){s(t,e)}),i=(o=n.dom.select("div[id=mcepastebin]",t)).length-1;i>=0;i--)a=n.dom.create("div"),t.insertBefore(a,o[i]),s(a,o[i]);return t?t.innerHTML:""},getLastRng:function(){return r},isDefault:function(){var e=i();return(t=e)&&"mcepastebin"===t.id&&o(e.innerHTML);var t},isDefaultContent:o}}}),r("tinymce.core.html.DomParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.DomParser")}),r("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")}),r("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Schema")}),r("tinymce.core.html.Serializer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Serializer")}),r("tinymce.plugins.paste.core.Utils",["global!navigator","tinymce.core.html.DomParser","tinymce.core.html.Schema","tinymce.core.util.Tools"],function(e,t,n,r){function i(e,t){return r.each(t,function(t){e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])}),e}return{filter:i,innerText:function(e){var o=new n,a=new t({},o),s="",l=o.getShortEndedElements(),c=r.makeMap("script noscript style textarea video audio iframe object"," "),u=o.getBlockElements();return e=i(e,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,r=t;if("br"!==n)if(l[n]&&(s+=" "),c[n])s+=" ";else{if(3===t.type&&(s+=t.value),!t.shortEnded&&(t=t.firstChild))do{e(t)}while(t=t.next);u[n]&&r.next&&(s+="\n","p"===n&&(s+="\n"))}else s+="\n"}(a.parse(e)),s},trimHtml:function(e){return e=i(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?" ":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}},isMsEdge:function(){return-1!==e.userAgent.indexOf(" Edge/")}}}),r("tinymce.plugins.paste.core.WordFilter",["tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,i,o,a){function s(e){var t,n;return n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],e=e.replace(/^[\u00a0 ]+/,""),i.each(n,function(n){if(n.test(e))return t=!0,!1}),t}function l(e){var n,r,i=1;function o(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=o(e)}while(e=e.next);return t}function a(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!a(e,t))return!1}while(e=e.next);return!0}function l(e,o,s){var l=e._listLevel||i;l!==i&&(l<i?n&&(n=n.parent.parent):(r=n,n=null)),n&&n.name===o?n.append(e):(r=r||n,n=new t(o,1),s>1&&n.attr("start",""+s),e.wrap(n)),e.name="li",l>i&&r&&r.lastChild.append(n),i=l,function e(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)do{e(t)}while(t=t.next)}(e),a(e,/^\u00a0+/),a(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),a(e,/^\u00a0+/)}for(var c=[],u=e.firstChild;void 0!==u&&null!==u;)if(c.push(u),null!==(u=u.walk()))for(;void 0!==u&&u.parent!==e;)u=u.walk();for(var f=0;f<c.length;f++)if("p"===(e=c[f]).name&&e.firstChild){var p=o(e);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(p)){l(e,"ul");continue}if(s(p)){var m=/([0-9]+)\./.exec(p),g=1;m&&(g=parseInt(m[1],10)),l(e,"ol",g);continue}if(e._listLevel){l(e,"ul",1);continue}n=null}else r=n,n=null}function c(e,n,r,a){var s,l={},c=e.dom.parseStyle(a);return i.each(c,function(t,i){switch(i){case"mso-list":(s=/\w+ \w+([0-9]+)/i.exec(a))&&(r._listLevel=parseInt(s[1],10)),/Ignore/i.test(t)&&r.firstChild&&(r._listIgnore=!0,r.firstChild._listIgnore=!0);break;case"horiz-align":i="text-align";break;case"vert-align":i="vertical-align";break;case"font-color":case"mso-foreground":i="color";break;case"mso-background":case"mso-highlight":i="background";break;case"font-weight":case"font-style":return void("normal"!==t&&(l[i]=t));case"mso-element":if(/^(comment|comment-list)$/i.test(t))return void r.remove()}0!==i.indexOf("mso-comment")?0!==i.indexOf("mso-")&&("all"===o.getRetainStyleProps(e)||n&&n[i])&&(l[i]=t):r.remove()}),/(bold)/i.test(l["font-weight"])&&(delete l["font-weight"],r.wrap(new t("b",1))),/(italic)/i.test(l["font-style"])&&(delete l["font-style"],r.wrap(new t("i",1))),(l=e.dom.serializeStyle(l,r.name))||null}return{preProcess:function(t,s){return o.shouldUseDefaultFilters(t)?function(t,s){var u,f;(u=o.getRetainStyleProps(t))&&(f=i.makeMap(u.split(/[, ]/))),s=a.filter(s,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]);var p=o.getWordValidElements(t),m=new n({valid_elements:p,valid_children:"-li[p]"});i.each(m.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var g=new e({},m);g.addAttributeFilter("style",function(e){for(var n,r=e.length;r--;)(n=e[r]).attr("style",c(t,f,n,n.attr("style"))),"span"===n.name&&n.parent&&!n.attributes.length&&n.unwrap()}),g.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),g.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),g.addNodeFilter("a",function(e){for(var t,n,r,i=e.length;i--;)if(n=(t=e[i]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()});var d=g.parse(s);return o.shouldConvertWordFakeLists(t)&&l(d),s=new r({validate:t.settings.validate},m).serialize(d)}(t,s):s},isWordContent:function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}}}),r("tinymce.plugins.paste.core.ProcessFilters",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.core.WordFilter"],function(e,t){var n=function(e,t){return{content:e,cancelled:t}},r=function(t,r,i,o){var a=e.firePastePreProcess(t,r,i,o);return t.hasEventListeners("PastePostProcess")&&!a.isDefaultPrevented()?function(t,r,i,o){var a=t.dom.create("div",{style:"display:none"},r),s=e.firePastePostProcess(t,a,i,o);return n(s.node.innerHTML,s.isDefaultPrevented())}(t,a.content,i,o):n(a.content,a.isDefaultPrevented())};return{process:function(e,n,i){var o=t.isWordContent(n),a=o?t.preProcess(e,n):n;return r(e,a,i,o)}}}),r("tinymce.plugins.paste.core.SmartPaste",["tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings"],function(e,t){var n=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},r=function(e){return n(e)&&/.(gif|jpe?g|png)$/.test(e)},i=function(e,t,r){return!(!1!==e.selection.isCollapsed()||!n(t))&&(i=e,o=t,a=r,i.undoManager.extra(function(){a(i,o)},function(){i.execCommand("mceInsertLink",!1,o)}),!0);var i,o,a},o=function(e,t,n){return!!r(t)&&(i=e,o=t,a=n,i.undoManager.extra(function(){a(i,o)},function(){i.insertContent('<img src="'+o+'">')}),!0);var i,o,a},a=function(e,n){return e.insertContent(n,{merge:t.shouldMergeFormats(e),paste:!0}),!0};return{isImageUrl:r,isAbsoluteUrl:n,insertContent:function(n,r){!1===t.isSmartPasteEnabled(n)?a(n,r):(s=n,l=r,e.each([i,o,a],function(e){return!0!==e(s,l,a)}));var s,l}}}),r("tinymce.plugins.paste.core.Clipboard",["global!Image","global!navigator","global!window","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.paste.api.Events","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Newlines","tinymce.plugins.paste.core.PasteBin","tinymce.plugins.paste.core.ProcessFilters","tinymce.plugins.paste.core.SmartPaste","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,i,o,a,s,l,c,u,f,p,m,g){return function(d){var v,y=this,h=0,P=new f(d),b="data:text/mce-internal,",x=g.createIdGenerator("mceclip");y.pasteFormat=l.isPasteAsTextEnabled(d)?"text":"html";function w(e,t){var n=t||c.isMarked(e),r=p.process(d,c.unmark(e),n);!1===r.cancelled&&m.insertContent(d,r.content)}function T(e){e=d.dom.encode(e).replace(/\r\n/g,"\n"),w(e=u.convert(e,d.settings.forced_root_block,d.settings.forced_root_block_attrs),!1)}function C(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1===n.indexOf(b)&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var i=e.types[r];try{t[i]=e.getData(i)}catch(e){t[i]=""}}}return t}function D(e){return E(e,"text/html")||E(e,"text/plain")}function _(t,n,r){t&&(d.selection.setRng(t),t=null);var i=n.result,o=function(e){var t;return-1!==(t=e.indexOf(","))?e.substr(t+1):null}(i),a=x(),s=d.settings.images_reuse_filename&&r.name?function(e){var t=e.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return t?d.dom.encode(t[1]):null}(r.name):a,l=new e;if(l.src=i,p=d.settings,m=l,!p.images_dataimg_filter||p.images_dataimg_filter(m)){var c,u,f=d.editorUpload.blobCache;(u=f.findFirst(function(e){return e.base64()===o}))?c=u:(c=f.create(a,r,o,s),f.add(c)),w('<img src="'+c.blobUri()+'">',!1)}else w('<img src="'+i+'">',!1);var p,m}function k(e,t){var r=e.clipboardData||e.dataTransfer;function i(r){var i,o,a,s=!1;if(r)for(i=0;i<r.length;i++)if(o=r[i],/^image\/(jpeg|png|gif|bmp)$/.test(o.type)){var l=o.getAsFile?o.getAsFile():o;(a=new n.FileReader).onload=_.bind(null,t,a,l),a.readAsDataURL(l),e.preventDefault(),s=!0}return s}if(d.settings.paste_data_images&&r)return i(r.items)||i(r.files)}function E(e,t){return t in e&&e[t].length>0}function S(e){return a.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode}function R(){d.on("keydown",function(e){function n(e){S(e)&&!e.isDefaultPrevented()&&P.remove()}if(S(e)&&!e.isDefaultPrevented()){if((v=e.shiftKey&&86===e.keyCode)&&r.webkit&&-1!==t.userAgent.indexOf("Version/"))return;if(e.stopImmediatePropagation(),h=(new Date).getTime(),r.ie&&v)return e.preventDefault(),void s.firePaste(d,!0);P.remove(),P.create(),d.once("keyup",n),d.once("paste",function(){d.off("keyup",n)})}});function e(e,t,n,r){var i,o;E(e,"text/html")?i=e["text/html"]:(i=P.getHtml(),r=r||c.isMarked(i),P.isDefaultContent(i)&&(n=!0)),i=g.trimHtml(i),P.remove(),o=!1===r&&u.isPlainText(i),i.length&&!o||(n=!0),n&&(i=E(e,"text/plain")&&o?e["text/plain"]:g.innerText(i)),P.isDefaultContent(i)?t||d.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):n?T(i):w(i,r)}d.on("paste",function(n){var a=(new Date).getTime(),s=function(e){var t=C(e.clipboardData||d.getDoc().dataTransfer);return g.isMsEdge()?o.extend(t,{"text/html":""}):t}(n),l=(new Date).getTime()-a,u=(new Date).getTime()-h-l<1e3,f="text"===y.pasteFormat||v,p=E(s,c.internalHtmlMime());v=!1,n.isDefaultPrevented()||function(e){var n=e.clipboardData;return-1!==t.userAgent.indexOf("Android")&&n&&n.items&&0===n.items.length}(n)?P.remove():D(s)||!k(n,P.getLastRng()||d.selection.getRng())?(u||n.preventDefault(),!r.ie||u&&!n.ieFake||E(s,"text/html")||(P.create(),d.dom.bind(P.getEl(),"paste",function(e){e.stopPropagation()}),d.getDoc().execCommand("Paste",!1,null),s["text/html"]=P.getHtml()),E(s,"text/html")?(n.preventDefault(),p||(p=c.isMarked(s["text/html"])),e(s,u,f,p)):i.setEditorTimeout(d,function(){e(s,u,f,p)},0)):P.remove()})}y.pasteHtml=w,y.pasteText=T,y.pasteImageData=k,y.getDataTransferItems=C,y.hasHtmlOrText=D,y.hasContentType=E,d.on("preInit",function(){R(),d.parser.addNodeFilter("img",function(e,t,n){function i(e){e.attr("data-mce-object")||a===r.transparentSrc||e.remove()}if(!d.settings.paste_data_images&&(l=n,l.data&&!0===l.data.paste))for(var o=e.length;o--;){var a=e[o].attributes.map.src;a&&(0===a.indexOf("webkit-fake-url")?i(e[o]):d.settings.allow_html_data_urls||(s=a,0!==s.indexOf("data:"))||i(e[o]))}var s,l})})}}),i("global!setTimeout",setTimeout),r("tinymce.plugins.paste.core.CutCopy",["global!setTimeout","tinymce.core.Env","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(e,t,n,r){var i=function(){},o=function(e,i,o){if(a=e,!1!==t.iOS||void 0===a||"function"!=typeof a.setData||!0===r.isMsEdge())return!1;try{return e.clearData(),e.setData("text/html",i),e.setData("text/plain",o),e.setData(n.internalHtmlMime(),i),!0}catch(e){return!1}var a},a=function(e,t,n,r){o(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},s=function(t){return function(r,i){var o=n.mark(r),a=t.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),s=t.dom.create("div",{contenteditable:"true"},o);t.dom.setStyles(a,{position:"fixed",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(s),t.dom.add(t.getBody(),a);var l=t.selection.getRng();s.focus();var c=t.dom.createRng();c.selectNodeContents(s),t.selection.setRng(c),e(function(){a.parentNode.removeChild(a),t.selection.setRng(l),i()},0)}},l=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}};return{register:function(t){t.on("cut",(n=t,function(t){!1===n.selection.isCollapsed()&&a(t,l(n),s(n),function(){e(function(){n.execCommand("Delete")},0)})}));var n;t.on("copy",(r=t,function(e){!1===r.selection.isCollapsed()&&a(e,l(r),s(r),i)}));var r}}}),r("tinymce.core.api.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")}),r("tinymce.plugins.paste.core.DragDrop",["tinymce.core.api.dom.RangeUtils","tinymce.core.util.Delay","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,i){var o=function(t,n){return e.getCaretRangeFromPoint(n.clientX,n.clientY,t.getDoc())},a=function(e,t){e.focus(),e.selection.setRng(t)};return{setup:function(e,s,l){n.shouldBlockDrop(e)&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),n.shouldPasteDataImages(e)||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.on("drop",function(c){var u,f;if(f=o(e,c),!c.isDefaultPrevented()&&!l.get()){u=s.getDataTransferItems(c.dataTransfer);var p=s.hasContentType(u,r.internalHtmlMime());if((s.hasHtmlOrText(u)&&!function(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")}(u)||!s.pasteImageData(c,f))&&f&&n.shouldFilterDrop(e)){var m=u["mce-internal"]||u["text/html"]||u["text/plain"];m&&(c.preventDefault(),t.setEditorTimeout(e,function(){e.undoManager.transact(function(){u["mce-internal"]&&e.execCommand("Delete"),a(e,f),m=i.trimHtml(m),u["text/html"]?s.pasteHtml(m,p):s.pasteText(m)})}))}}}),e.on("dragstart",function(e){l.set(!0)}),e.on("dragover dragend",function(t){n.shouldPasteDataImages(e)&&!1===l.get()&&(t.preventDefault(),a(e,o(e,t))),"dragend"===t.type&&l.set(!1)})}}}),r("tinymce.plugins.paste.core.PrePostProcess",["tinymce.plugins.paste.api.Settings"],function(e){return{setup:function(t){var n=t.plugins.paste,r=e.getPreProcess(t);r&&t.on("PastePreProcess",function(e){r.call(n,n,e)});var i=e.getPostProcess(t);i&&t.on("PastePostProcess",function(e){i.call(n,n,e)})}}}),r("tinymce.plugins.paste.core.Quirks",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.Utils","tinymce.plugins.paste.core.WordFilter"],function(e,t,n,r,i){function o(e,t){e.on("PastePreProcess",function(n){n.content=t(e,n.content,n.internal,n.wordContent)})}function a(e,n){if(!i.isWordContent(n))return n;var o=[];t.each(e.schema.getBlockElements(),function(e,t){o.push(t)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+o.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return n=r.filter(n,[[a,"$1"]]),n=r.filter(n,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function s(e,t,r,i){if(i||r)return t;var o=n.getWebkitStyles(e);if(!1===n.shouldRemoveWebKitStyles(e)||"all"===o)return t;if(o&&(o=o.split(/[, ]/)),o){var a=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var i=a.parseStyle(a.decode(n),"span"),l={};if("none"===o)return t+r;for(var c=0;c<o.length;c++){var u=i[o[c]],f=a.getStyle(s,o[c],!0);/color/.test(o[c])&&(u=a.toHex(u),f=a.toHex(f)),f!==u&&(l[o[c]]=u)}return(l=a.serializeStyle(l,"span"))?t+' style="'+l+'"'+r:t+r})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}function l(e,t){e.$("a",t).find("font,u").each(function(t,n){e.dom.remove(n,!0)})}return{setup:function(t){e.webkit&&o(t,s),e.ie&&(o(t,a),r=l,(n=t).on("PastePostProcess",function(e){r(n,e.node)}));var n,r}}}),i("global!Array",Array),i("global!Error",Error),r("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(e){return function(){return e}};return{noop:function(){},noarg:function(e){return function(){return e()}},compose:function(e,t){return function(){return e(t.apply(null,arguments))}},constant:n,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];var o=n.concat(r);return t.apply(null,o)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:n(!1),always:n(!0)}}),r("tinymce.plugins.paste.ui.Buttons",["ephox.katamari.api.Fun"],function(e){var t=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat),e.on("PastePlainTextToggle",function(e){r.active(e.state)})};return{register:function(n,r){var i=e.curry(t,n,r);n.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:i}),n.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:r.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:i})}}}),r("tinymce.plugins.paste.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.paste.alien.DetectProPlugin","tinymce.plugins.paste.api.Api","tinymce.plugins.paste.api.Commands","tinymce.plugins.paste.core.Clipboard","tinymce.plugins.paste.core.CutCopy","tinymce.plugins.paste.core.DragDrop","tinymce.plugins.paste.core.PrePostProcess","tinymce.plugins.paste.core.Quirks","tinymce.plugins.paste.ui.Buttons"],function(e,t,n,r,i,o,a,s,l,c,u){var f=e(!1);return t.add("paste",function(t){if(!1===n.hasProPlugin(t)){var p=new o(t),m=c.setup(t),g=e(!1);return u.register(t,p),i.register(t,p,f),l.setup(t),a.register(t),s.setup(t,p,g),r.get(p,m)}}),function(){}}),n("tinymce.plugins.paste.Plugin")()}();