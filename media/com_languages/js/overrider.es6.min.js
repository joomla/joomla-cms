((a,b)=>{class c{constructor(){this.states={refreshing:!1,refreshed:!1,counter:0,searchString:"",searchType:"value"},this.spinner=b.getElementById("overrider-spinner"),this.spinnerBtn=b.getElementById("overrider-spinner-btn"),this.moreResults=b.getElementById("more-results"),this.resultsContainer=b.getElementById("results-container"),this.refreshStatus=b.getElementById("refresh-status")}refreshCache(){this.states.refreshing=!0,this.refreshStatus.classList.add("show"),a.request({url:"index.php?option=com_languages&task=strings.refresh&format=json",method:"POST",headers:{"Content-Type":"application/json"},onSuccess:b=>{b.error&&b.message&&alert(b.message),b.messages&&a.renderMessages(b.messages),this.refreshStatus.classList.remove("show"),this.states.refreshing=!1},onError:()=>{alert(a.JText._("COM_LANGUAGES_VIEW_OVERRIDE_REQUEST_ERROR")),this.refreshStatus.classList.remove("show")}})}searchStrings(c){if(this.states.refreshing)return;const d=b.getElementById("jform_searchstring"),e=b.getElementById("jform_searchtype");if(!c){this.states.searchString=d.value,this.states.searchType=e.value||"value";const a=[].slice.call(b.querySelectorAll(".language-results"));a.forEach(a=>{a.parentNode.removeChild(a)})}if(!this.states.searchString)return void d.classList.add("invalid");if(c)this.spinnerBtn.classList.add("show");else{this.moreResults.classList.remove("show");const a=[].slice.call(b.querySelectorAll("#results-container div.language-results"));a.forEach(a=>{a.parentNode.removeChild(a)}),this.resultsContainer.classList.add("show"),this.spinner.classList.add("show")}a.request({url:`index.php?option=com_languages&task=strings.search&format=json&searchstring=${this.states.searchString}&searchtype=${this.states.searchType}&more=${c}`,method:"POST",headers:{"Content-Type":"application/json"},onSuccess:b=>{const c=JSON.parse(b);c.error&&c.message&&alert(c.message),c.messages&&a.renderMessages(c.messages),c.data&&(c.data.results&&a.overrider.insertResults(c.data.results),c.data.more&&(this.states.more=c.data.more,this.moreResults.classList.add("show"))),this.spinnerBtn.classList.remove("show"),this.spinner.classList.remove("show")},onError:()=>{alert(a.JText._("COM_LANGUAGES_VIEW_OVERRIDE_REQUEST_ERROR")),this.moreResults.classList.remove("show"),this.resultsContainer.classList.remove("show")}})}insertResults(c){this.states.counter+=1;const d=b.createElement("div");if(d.setAttribute("id",`language-results${this.states.counter}`),d.classList.add("language-results"),d.classList.add("list-group"),d.classList.add("mb-2"),d.classList.add("show"),c.forEach((c,e)=>{const f=b.createElement("a");f.setAttribute("onclick",`Joomla.overrider.selectString(${this.states.counter+e});`),f.setAttribute("href","#"),f.classList.add("list-group-item"),f.classList.add("list-group-item-action"),f.classList.add("flex-column"),f.classList.add("align-items-start");const a=b.createElement("div");a.setAttribute("id",`override_key${this.states.counter+e}`),a.setAttribute("title",c.file),a.classList.add("result-key"),a.innerHTML=c.constant;const g=b.createElement("div");g.setAttribute("id",`override_string${this.states.counter+e}`),g.classList.add("result-string"),g.innerHTML=c.string,f.appendChild(a),f.appendChild(g),d.appendChild(f)}),!c.length){const c=b.createElement("div");c.innerHTML=a.JText._("COM_LANGUAGES_VIEW_OVERRIDE_NO_RESULTS"),d.appendChild(c)}this.moreResults&&this.moreResults.parentNode.insertBefore(d,this.moreResults)}selectString(a){b.getElementById("jform_key").value=b.getElementById(`override_key${a}`).innerHTML,b.getElementById("jform_override").value=b.getElementById(`override_string${a}`).innerHTML}}b.addEventListener("DOMContentLoaded",()=>{a.overrider=new c})})(Joomla,document);